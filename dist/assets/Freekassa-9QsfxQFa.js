import{i as y,r as m,n as b,o as w,a2 as k,a as d,b as u,d as e,t as x,e as l,s as B,z as I,y as j,A as C,h as E,B as M,c as R}from"./index-htZnyubk.js";import{_ as S}from"./logo-BkMWHWzq.js";import{i as V}from"./isValidEmail-BQNythMj.js";import{a as _}from"./axios-B4uVmeYG.js";const D="/assets/sbp-6e7v2W2Z.png",P="/assets/sbp_selected-DMcj_A-n.png",K="/assets/card-HjY3IWP0.png",N="/assets/card_selected-CKsbZyHE.png",U={class:"flex justify-center items-center h-screen p-4"},z=e("span",{class:"w-[100px] fixed top-8 left-8"},[e("img",{src:S})],-1),A={class:"flex flex-col gap-y-6 items-center text-center p-4 max-w-[332px] w-full"},F={class:"flex flex-col gap-y-2 w-full"},H={class:"flex justify-around font-medium flex-wrap text-2xl items-center"},L=e("h4",null,"Ваш заказ:",-1),T={class:"flex flex-col from-[#696969] to-[#505050] w-full bg-gradient-to-br rounded-xl"},W=e("div",{class:"p-2"},[e("h4",{class:"font-medium"},"Способ оплаты:")],-1),Z={class:"flex justify-between px-3"},$=["src"],O=["src"],X=e("div",{class:"px-4 py-6 flex"},[e("h4",{class:"text-left text-sm"},"Оплатите покупку по СБП или картой любого банка РФ")],-1),Y={class:"flex flex-col gap-y-2 px-2"},q={key:0,class:"text-sm text-red"},G={class:"p-2"},J=["disabled"],Q={key:1},ne={__name:"Freekassa",setup(ee){const g=y(),o=m(""),t=b({error:!1,message:""}),p=new URLSearchParams(window.location.search).get("amount"),v=new URLSearchParams(window.location.search).get("order");w(()=>{p||g.replace({name:"INDEX"})});const r=m(!1),i=m("sbp"),h=async()=>{if(o.value){if(!V(o.value)){t.error=!0,t.message="Некорректно введён e-mail";return}}else{t.error=!0,t.message="Обязательное поле";return}r.value=!0;try{const s=(await _.get("https://api.ipify.org?format=json")).data.ip,{data:{payment_url:c}}=await _.post(R.BOT+"/generate-payment-link",{amount:p,email:o.value,ip:s,payment_method:i.value,paymentId:v});if(!c)return;window.location.href=c}catch(a){console.log(a)}finally{r.value=!1}},f=a=>{i.value=a};return(a,s)=>{const c=k("Icon");return d(),u("div",U,[z,e("div",A,[e("div",F,[e("div",H,[L,e("span",null,x(l(p))+" ₽",1)])]),e("div",T,[W,e("div",Z,[e("img",{src:i.value==="sbp"?l(P):l(D),onClick:s[0]||(s[0]=n=>f("sbp")),class:"cursor-pointer w-[calc(50%-10px)]",alt:"Оплата через СБП"},null,8,$),e("img",{src:i.value==="card"?l(N):l(K),onClick:s[1]||(s[1]=n=>f("card")),class:"cursor-pointer w-[calc(50%-10px)]",alt:"Оплата картой"},null,8,O)]),X,e("div",Y,[B(e("input",{class:j(["bg-[#7B7B7B] placeholder:text-[#B0B0B0] px-4 py-2.5 text-sm rounded-xl outline-none border-[1.5px]",t.error?"border-red":"border-transparent"]),"onUpdate:modelValue":s[2]||(s[2]=n=>o.value=n),onKeyup:s[3]||(s[3]=C(n=>n.target.blur(),["enter"])),type:"email",placeholder:"Введите e-mail для чека",onFocus:s[4]||(s[4]=()=>{t.error=!1})},null,34),[[I,o.value]]),t.error&&t.message?(d(),u("span",q,x(t.message),1)):E("",!0)]),e("div",G,[e("button",{disabled:r.value,onClick:h,class:"bg-green active:opacity-75 flex justify-center items-center transition-all shadow-sm px-4 h-12 font-semibold text-sm w-full rounded-xl",href:"#",target:"_blank"},[r.value?(d(),M(c,{key:0,icon:"line-md:loading-loop",class:"text-lg"})):(d(),u("span",Q,"Оплатить"))],8,J)])])])])}}};export{ne as default};
