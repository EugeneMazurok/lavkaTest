import{_ as v}from"./logo-BkMWHWzq.js";import{_ as y}from"./enot-BC699OQq.js";import{f as g,v as b,i as w,j as k,r as i,o as I,a as o,B as d,b as u,d as e,t as B,e as D,a1 as S,c as f,D as j,I as E}from"./index-htZnyubk.js";import{a as m}from"./axios-B4uVmeYG.js";import{_ as R}from"./Loader-Bz4ZUWxB.js";const C={key:1,class:"flex justify-center items-center h-screen p-4"},N=e("span",{class:"w-[100px] fixed top-8 left-8"},[e("img",{src:v})],-1),A={class:"flex flex-col gap-y-6 items-center text-center p-4 max-w-[332px] w-full"},F={class:"flex flex-col gap-y-2 w-full"},O={class:"flex justify-around font-medium flex-wrap text-2xl items-center"},T=e("h4",null,"Ваш заказ:",-1),U={class:"flex flex-col from-[#696969] to-[#505050] w-full bg-gradient-to-br rounded-xl"},V=S('<div class="p-2"><h4 class="font-medium">Способ оплаты:</h4></div><button class="font-medium bg-[#323232] h-12 flex items-center py-2 px-4 active:opacity-75"><span class="text-[#FA5745] uppercase">Free</span><span class="text-[#888888] uppercase">Kassa</span></button><button class="font-medium h-12 flex items-center py-2 px-4 active:opacity-75"><img src="'+y+'" class="w-16"></button><div class="px-4 py-6 flex"><h4 class="text-left text-sm">Оплатите покупку по СБП или картой любого банка РФ</h4></div>',4),X={class:"p-2"},q=["disabled"],K={key:1},H={__name:"Index",setup(L){const _=g(f.DIRECTUS.API).with(b()),l=w(),c=k(),t=i(null),n=i(!0),x=async()=>{n.value=!0;try{t.value=await _.request(j("orders",c.params.id,{fields:["*.*.*"]})),t.value.status==="paid"&&l.replace({name:"SUCCESS"})}catch(s){console.log(s),l.replace({name:"INDEX"})}n.value=!1};I(()=>{c.params.id||l.replace({name:"INDEX"}),x()});const a=i(!1),h=async()=>{a.value=!0;try{const r=(await m.get("https://api.ipify.org?format=json")).data.ip,{data:{payment_url:p}}=await m.post(f.BOT+"/generate-payment-link",{amount:t.value.total_price,email:t.value.email,ip:r,payment_method:"sbp",paymentId:t.value.id});if(!p)return;window.location.href=p}catch(s){console.log(s)}finally{a.value=!1}};return(s,r)=>n.value?(o(),d(R,{key:0})):(o(),u("div",C,[N,e("div",A,[e("div",F,[e("div",O,[T,e("span",null,B(t.value.total_price)+" ₽",1)])]),e("div",U,[V,e("div",X,[e("button",{disabled:a.value,onClick:h,class:"bg-green active:opacity-75 flex justify-center items-center transition-all shadow-sm px-4 h-12 font-semibold text-sm w-full rounded-xl",href:"#",target:"_blank"},[a.value?(o(),d(D(E),{key:0,icon:"line-md:loading-loop",class:"text-lg"})):(o(),u("span",K,"Оплатить"))],8,q)])])])]))}};export{H as default};
